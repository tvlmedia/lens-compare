<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lens Comparison</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- ✅ voor mobiel -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- === Controls === -->
  <div class="controls">
    <button id="toggleButton">↔ Flip</button>
    <button id="fullscreenButton">⛶ Fullscreen</button>
    <button id="downloadPdfButton">⤓ Download PDF</button>

    <select id="leftLens"></select>
    <select id="rightLens"></select>

    <select id="tStop">
      <option value="1.4">T1.4</option>
      <option value="2">T2</option>
      <option value="2.8" selected>T2.8</option>
      <option value="4">T4</option>
      <option value="5.6">T5.6</option>
      <option value="8">T8</option>
    </select>

    <select id="focalLength">
      <option value="18mm">18mm</option>
      <option value="25mm">25mm</option>
      <option value="35mm" selected>35mm</option>
      <option value="50mm">50mm</option>
      <option value="80mm">80mm</option>
      <option value="135mm">135mm</option>
    </select>
  </div>

  <!-- === Comparison area === -->
  <div id="comparisonWrapper">
    <div id="beforeImage">
      <img id="beforeImgTag" alt="Right lens preview">
    </div>

    <div id="afterWrapper">
      <div id="afterImage">
        <img id="afterImgTag" alt="Left lens preview">
      </div>
    </div>

    <div id="slider"></div>
  </div>

  <!-- === Lens labels === -->
  <div id="infoContainer">
    <div id="leftLabel"></div>
    <div id="rightLabel"></div>
  </div>

  <!-- === Explanation box === -->
  <div id="explanationBox">
    <p>⚠️ Let op: sommige lenzen zijn visueel gematcht. Als je bijvoorbeeld 35mm kiest, zie je soms een lens van 32 of 37mm die op 35mm lijkt qua field of view. Dit is om een eerlijke vergelijking te bieden.</p>
  </div>

  <!-- === External libraries === -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- === Main script === -->
  <script src="script.js"></script>

</body>
</html>

document.getElementById("downloadPdfButton").addEventListener("click", async () => {
  const { jsPDF } = window.jspdf;

  // Screenshot van de vergelijking
  const comparison = document.getElementById("comparisonWrapper");
  const canvas = await html2canvas(comparison, {
    scale: 2,
    useCORS: true
  });

  const imgData = canvas.toDataURL("image/jpeg", 1.0);
  const pdf = new jsPDF({
    orientation: "landscape",
    unit: "px",
    format: [canvas.width, canvas.height]
  });

  // Voeg screenshot toe
  pdf.addImage(imgData, "JPEG", 0, 0, canvas.width, canvas.height);

  // Optioneel: lenslabels onderaan
  const leftText = leftLabel.textContent;
  const rightText = rightLabel.textContent;
  pdf.setFontSize(14);
  pdf.setTextColor(255);
  pdf.setFillColor(0, 0, 0);
  pdf.rect(0, canvas.height - 40, canvas.width, 40, 'F');
  pdf.text(leftText, 30, canvas.height - 15);
  pdf.text(rightText, canvas.width - 250, canvas.height - 15);

  // Downloaden
  pdf.save("lens_comparison.pdf");
});
